import{j as r,d as x}from"./index-V3VmGuDJ.js";import{r as t}from"./vendor-react-D2XI2PP0.js";import{N as j,F as f}from"./Footer-BNnanTqC.js";import{f as u,h as p,d as N,q as C,o as D,e as E}from"./vendor-firebase-Bd6e5iIs.js";function O({orderId:s,orderShop:e,orderPrice:a,orderPaymentMethod:d,orderDate:o}){return r.jsx(r.Fragment,{children:r.jsx("div",{className:"orderCard-container",children:r.jsxs("div",{className:"orderCard-wrapper",children:[r.jsx("div",{className:"orderCard-top",children:r.jsxs("h1",{className:"orderCard-title",children:["ORDER ID : ",s]})}),r.jsxs("div",{className:"orderCard-bottom",children:[r.jsxs("div",{className:"orderCard-bottom-left",children:[r.jsx("h1",{className:"orderCard-shop",children:e}),r.jsxs("p",{className:"orderCard-status",children:[" STATUS : PAYMENT CONFIRMED (",d,")"]}),r.jsxs("p",{className:"orderCard-date",children:["Date : ",o]})]}),r.jsx("div",{className:"orderCard-bottom-mid",children:r.jsxs("p",{children:["RP. ",a]})}),r.jsx("div",{className:"orderCard-bottom-right",children:r.jsx("button",{className:"orderCard-btn",children:"MESSAGE MECHANIC"})})]})]})})})}function S({docId:s}){const[e,a]=t.useState(null),[d,o]=t.useState(!0),[n,c]=t.useState(null);return t.useEffect(()=>{(async()=>{try{const l=u(x,"Orders",s),m=await p(l);if(m.exists()){const i=m.data();a({orderShop:i.orderShop,orderPrice:i.orderPrice,orderPaymentMethod:i.orderPaymentMethod,orderDate:i.orderDate.toDate().toLocaleString()})}else c("No such document!")}catch(l){c("Error fetching document: "+l.message)}o(!1)})()},[s]),d?r.jsx("div",{children:"Loading..."}):n?r.jsx("div",{children:n}):e?r.jsx(O,{orderId:s,orderShop:e.orderShop,orderPrice:e.orderPrice,orderPaymentMethod:e.orderPaymentMethod,orderDate:e.orderDate}):r.jsx("div",{children:"No data"})}function R(){const[s,e]=t.useState([]);return t.useEffect(()=>{(async()=>{try{const d=N(x,"Orders"),o=C(d,D("orderDate","desc")),n=await E(o);let c=[];n.forEach(h=>{c.push(h.id)}),e(c)}catch(d){console.error("Error fetching data:",d)}})()},[]),r.jsxs(r.Fragment,{children:[r.jsx(j,{}),r.jsx("div",{className:"orders-container",children:r.jsxs("div",{className:"orders-wrapper",children:[r.jsx("div",{className:"orders-title",children:r.jsx("h1",{children:"YOUR ORDERS (NEWEST TO OLDEST) "})}),r.jsx("div",{className:"cards-container",children:r.jsx("div",{className:"cards-wrapper",children:s.map(a=>r.jsx(S,{docId:a},a))})})]})}),r.jsx(f,{})]})}export{R as default};
