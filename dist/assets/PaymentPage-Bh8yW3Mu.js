import{j as e,d as y}from"./index-V3VmGuDJ.js";import{e as S,r as h,b as R}from"./vendor-react-D2XI2PP0.js";import{N as w,F as E}from"./Footer-BNnanTqC.js";import{R as C}from"./RepairShopBanner-BrfGsCig.js";import{b as T,d as p,q as b,w as x,e as N}from"./vendor-firebase-Bd6e5iIs.js";/* empty css                       */function I(){return e.jsx("div",{className:"PaymentHeader-container",children:e.jsx("div",{className:"PaymentHeader-wrapper",children:e.jsx("h1",{children:"INVOICE"})})})}function A(){const{searchID:n}=S(),[j,f]=h.useState([]),P=R(),D=({color:s})=>e.jsx("hr",{style:{color:s,backgroundColor:s,height:2,width:"100%"}}),o=async s=>{try{const t={orderShop:r.title,orderList:l.map(i=>({id:i.id,serviceTitle:i.serviceTitle,servicePrice:i.servicePrice})),orderPrice:v+1e4,orderPaymentMethod:s,orderDate:new Date},d=await T(p(y,"Orders"),t);console.log("Order placed successfully with ID: ",d.id)}catch(t){console.error("Error placing order: ",t)}P("/confirmation")};h.useEffect(()=>{window.scrollTo(0,0)},[]),h.useEffect(()=>{(async()=>{try{const t=b(p(y,"RepairShops"),x("title",">=",n),x("title","<=",n+"ï£¿")),d=await N(t);let i=[];for(const m of d.docs){const a=m.data(),M=await N(b(p(m.ref,"Services"),x("choice","==",!0)));let g=[];for(const u of M.docs){const c=u.data();g.push({id:u.id,serviceTitle:c.title,servicePrice:c.price,priceText:c.subtitle,choice:c.choice})}i.push({id:m.id,img:a.img,rating:a.rating,service1:a.service1,service2:a.service2,service3:a.service3,star:a.star,subtitle:a.subtitle,title:a.title,services:g})}f(i)}catch(t){console.log("No data fetched, Error found :",t)}})()},[n]);const r=j.length>0?j[0]:null,l=r?r.services:[],v=l.reduce((s,t)=>s+t.servicePrice,0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(w,{})}),r&&e.jsx(C,{title:r.title,rating:r.rating}),e.jsx(I,{}),e.jsx("div",{className:"PaymentDetails-container",children:e.jsx("div",{className:"PaymentDetails-wrapper",children:e.jsxs("div",{className:"PaymentDetails-margin",children:[e.jsxs("div",{className:"PaymentDetails-wrapper-middle",children:[l.map(s=>e.jsxs("div",{className:"ServicePayment",children:[e.jsx("p",{children:s.serviceTitle}),e.jsxs("p",{children:["Rp ",s.servicePrice]})]},s.id)),e.jsxs("div",{className:"MobileServiceCharge",children:[e.jsx("p",{children:"MOBILE SERVICE CHARGE"}),e.jsx("p",{children:"Rp 10000"})]}),e.jsx(D,{color:"black"}),e.jsxs("div",{className:"Subtotal",children:[e.jsx("p",{children:"SUBTOTAL"}),e.jsxs("p",{children:["Rp ",v+1e4]})]})]}),e.jsx("div",{className:"PaymentMethod",children:e.jsx("h1",{children:"PAYMENT METHOD"})}),e.jsxs("div",{className:"PaymentDetails-wrapper-bottom",children:[e.jsxs("button",{className:"paymentMethod-btn",onClick:()=>o("Pay at Merchant"),children:[e.jsx("div",{className:"paymentMethod-btn-text",children:"Pay at Merchant"}),e.jsx("img",{src:"/Merchant.png",alt:"",className:"paymentMethod-img"})]}),e.jsxs("button",{className:"paymentMethod-btn",onClick:()=>o("QRIS"),children:[e.jsx("div",{className:"paymentMethod-btn-text",children:"QRIS"}),e.jsx("img",{src:"/qr.png",alt:"",className:"paymentMethod-img"})]}),e.jsxs("button",{className:"paymentMethod-btn",onClick:()=>o("Debit/Credit"),children:[e.jsx("div",{className:"paymentMethod-btn-text",children:"Debit/Credit"}),e.jsxs("div",{className:"debit-container",children:[e.jsx("img",{src:"/visa.png",alt:"",className:"debit-img"}),e.jsx("img",{src:"/mastercard.png",alt:"",className:"debit-img"}),e.jsx("img",{src:"/amex.png",alt:"",className:"debit-img"})]})]})]})]})})}),e.jsx(E,{})]})}export{A as default};
